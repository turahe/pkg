# =============================================================================
# .env.example — copy to .env and fill in values marked <required>
# Loaded automatically by config.Setup("") via godotenv.
# All values can also be injected as real environment variables (e.g. in
# Docker / Kubernetes); environment variables take precedence over .env.
# =============================================================================

# -----------------------------------------------------------------------------
# Server
# -----------------------------------------------------------------------------
SERVER_PORT=8080
SERVER_MODE=debug                          # debug | release | test
SERVER_SECRET=<required-change-in-production>   # JWT signing secret (min 32 chars recommended)
SERVER_ACCESS_TOKEN_EXPIRY=1               # hours  (default: 1)
SERVER_REFRESH_TOKEN_EXPIRY=7              # days   (default: 7)
SERVER_SESSION_EXPIRY=24                   # hours  (default: 24)
SERVER_SESSION_COOKIE_NAME=admin_session
SERVER_SESSION_SECURE=false                # true in production (HTTPS only)
SERVER_SESSION_HTTP_ONLY=true
SERVER_SESSION_SAME_SITE=lax              # strict | lax | none
SERVER_TIMEZONE=UTC                        # IANA timezone e.g. Asia/Jakarta

# -----------------------------------------------------------------------------
# CORS
# -----------------------------------------------------------------------------
CORS_GLOBAL=true                           # allow all origins
CORS_IPS=                                  # comma-separated allowed IPs (when CORS_GLOBAL=false)

# -----------------------------------------------------------------------------
# Database — primary connection  <DATABASE_DBNAME, USERNAME, PASSWORD required>
# Drivers: mysql | postgres | sqlite | sqlserver | cloudsql-mysql | cloudsql-postgres
# -----------------------------------------------------------------------------
DATABASE_DRIVER=mysql
DATABASE_HOST=127.0.0.1
DATABASE_PORT=3306
DATABASE_USERNAME=<required>
DATABASE_PASSWORD=<required>
DATABASE_DBNAME=<required>
DATABASE_SSLMODE=false
DATABASE_LOGMODE=false                     # true enables GORM query logging

# Connection pool
# Defaults applied by database.Options: 10 idle, 30 open, 30 min lifetime.
# Increase for high-RPS workloads; use WithProductionPoolDefaults for 50/150.
DATABASE_MAX_IDLE_CONNS=10
DATABASE_MAX_OPEN_CONNS=30
DATABASE_CONN_MAX_LIFETIME=30             # minutes (default: 30)

# Google Cloud SQL (only for cloudsql-mysql / cloudsql-postgres driver)
# Format: project:region:instance  e.g. my-project:us-central1:my-instance
# IAM auth and Private IP are configured via database.Options in code.
DATABASE_CLOUD_SQL_INSTANCE=

# -----------------------------------------------------------------------------
# Database — secondary / site connection  (optional)
# Leave DATABASE_DBNAME_SITE empty to disable the site database entirely.
# -----------------------------------------------------------------------------
DATABASE_DRIVER_SITE=mysql
DATABASE_HOST_SITE=127.0.0.1
DATABASE_PORT_SITE=3306
DATABASE_USERNAME_SITE=
DATABASE_PASSWORD_SITE=
DATABASE_DBNAME_SITE=
DATABASE_SSLMODE_SITE=false
DATABASE_LOGMODE_SITE=false
DATABASE_MAX_IDLE_CONNS_SITE=10
DATABASE_MAX_OPEN_CONNS_SITE=30
DATABASE_CONN_MAX_LIFETIME_SITE=30        # minutes
DATABASE_CLOUD_SQL_INSTANCE_SITE=

# -----------------------------------------------------------------------------
# Redis
# Set REDIS_ENABLED=true and configure host/port to enable caching and rate
# limiting.  Rate limiting middleware requires Redis to be enabled.
# -----------------------------------------------------------------------------
REDIS_ENABLED=false
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0                                 # database index (0–15; ignored in cluster mode)

# Connection pool & timeouts (0 = use client defaults)
REDIS_POOL_SIZE=0                          # max connections per node  (e.g. 100 for high RPS)
REDIS_MIN_IDLE_CONNS=0                     # min idle connections kept open
REDIS_READ_TIMEOUT_SEC=0                   # read timeout in seconds   (0 = no timeout)
REDIS_WRITE_TIMEOUT_SEC=0                  # write timeout in seconds  (0 = no timeout)

# Redis Cluster — Google Cloud Memorystore Redis Cluster or self-managed
REDIS_CLUSTER_MODE=false
REDIS_CLUSTER_NODES=                       # comma-separated host:port  e.g. 10.0.0.1:6379,10.0.0.2:6379

# -----------------------------------------------------------------------------
# Rate Limiter  (requires REDIS_ENABLED=true)
# -----------------------------------------------------------------------------
RATE_LIMITER_ENABLED=false
RATE_LIMITER_REQUESTS=100                  # max requests per window
RATE_LIMITER_WINDOW=60                     # window size in seconds
RATE_LIMITER_KEY_BY=ip                     # ip | user  ("user" requires auth middleware)
RATE_LIMITER_SKIP_PATHS=/live,/ready,/metrics  # comma-separated paths to bypass

# -----------------------------------------------------------------------------
# Google Cloud Storage  (optional)
# Leave GCS_ENABLED=false when not using GCS.
# -----------------------------------------------------------------------------
GCS_ENABLED=false
GCS_BUCKET_NAME=
GCS_CREDENTIALS_FILE=                      # path to service-account JSON; omit to use ADC
